webpackJsonp([1],{"3NC5":function(t,e,i){t.exports=i.p+"static/img/score0.a59ce53.png"},"8KO+":function(t,e){},"8le3":function(t,e){},C15M:function(t,e,i){t.exports=i.p+"static/img/zongzi.bbda5fd.png"},C34Q:function(t,e,i){t.exports=i.p+"static/img/bg.b6b17b1.png"},Eqfb:function(t,e,i){t.exports=i.p+"static/img/hand.1f761d8.png"},IRMy:function(t,e,i){t.exports=i.p+"static/img/score2.0d5f6ef.png"},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),s={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var h=i("VU/8")({name:"App"},s,!1,function(t){i("8KO+")},null,null).exports,o=i("/ocq"),a=(i("OqqB"),i("Zrlr")),c=i.n(a),r=i("wxAW"),l=i.n(r),u=Hilo.Class.create({Mixes:Hilo.EventMixin,queue:null,bg:null,bigzZongzi:null,zongzi:null,fruit:null,hand:null,beginBtn:null,score0:null,score1:null,score2:null,load:function(){var t=[{id:"bg",src:i("C34Q")},{id:"bigzZongzi",src:i("Y5Kh")},{id:"zongzi",src:i("C15M")},{id:"fruit",src:i("g1Dp")},{id:"hand",src:i("Eqfb")},{id:"beginBtn",src:i("eWW6")},{id:"score0",src:i("3NC5")},{id:"score1",src:i("kmFj")},{id:"score2",src:i("IRMy")}];this.queue=new Hilo.LoadQueue,this.queue.add(t),this.queue.on("complete",this.onComplete.bind(this)),this.queue.on("error",function(t){console.log("加载出错",t)}),this.queue.start()},onComplete:function(){this.bg=this.queue.get("bg").content,this.bigzZongzi=this.queue.get("bigzZongzi").content,this.zongzi=this.queue.get("zongzi").content,this.fruit=this.queue.get("fruit").content,this.hand=this.queue.get("hand").content,this.beginBtn=this.queue.get("beginBtn").content,this.score0=this.queue.get("score0").content,this.score1=this.queue.get("score1").content,this.score2=this.queue.get("score2").content,this.queue.off("complete"),this.fire("complete")}}),d=Hilo.Class.create({Extends:Hilo.Bitmap,constructor:function(t){d.superclass.constructor.call(this,t),this.onUpdate=this.onUpdate.bind(this)},over:function(){this.removeFromParent()},onUpdate:function(){this.parent.height<this.y&&this.removeFromParent()}}),g=d,m=Hilo.Class.create({Extends:Hilo.Container,SmallZongziImg:null,timer:null,zongziList:[],enemySpeed:0,createSpeed:0,score:[10,5,-10],tween:null,constructor:function(t){m.superclass.constructor.call(this,t),this.tween=Hilo.Tween,this.creatEnemy(),this.beginCreateEnemy()},random:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},creatEnemy:function(){var t=this.random(0,100),e=null;e=t<27?0:t<55?1:2;var i=new g({image:this.zongziList[e],rect:[0,0,this.zongziList[e].width,this.zongziList[e].height]}).addTo(this);i.x=this.random(100,this.width-100),i.y=-300*Math.random(),i.score=this.score[e],this.tween.to(i,{y:this.height+200},{duration:1400/this.enemySpeed*1e3,loop:!1,onComplete:function(){i.removeFromParent()}})},beginCreateEnemy:function(){var t=this;this.timer=setInterval(function(){t.creatEnemy()},this.createSpeed)},stopCreateEnemy:function(){clearInterval(this.timer),this.removeAllChildren()},checkCollision:function(t){for(var e=0,i=this.children.length;e<i;e++)if(t.hitTestObject(this.children[e],!0))return!0;return!1}}),p=m,f=Hilo.Class.create({Extends:Hilo.Container,img:null,bowl:null,score:null,constructor:function(t){f.superclass.constructor.call(this,t),this.initHand(),this.initBowl()},initHand:function(){new Hilo.Bitmap({id:"hand",image:this.img,rect:[0,0,this.img.width,this.img.height]}).addTo(this)},initBowl:function(){this.bowl=new Hilo.Bitmap({id:"bowl",rect:[0,0,this.img.width/3,10],x:this.img.width/3,y:50}).addTo(this)},addScore:function(t){this.score=new Hilo.Bitmap({id:"score",image:t,rect:[0,0,t.width,t.height],x:(this.img.width-t.width)/2,y:-t.height}).addTo(this),Hilo.Tween.to(this.score,{x:(this.img.width-t.width/2)/2,y:-2*t.height,alpha:0,width:t.width/2,height:t.height/2},{duration:600,ease:Hilo.Ease.Quad.EaseIn,onComplete:function(){}})},checkCollision:function(t){return!!t.hitTestObject(this.bowl,!0)}}),w=f,b=function(){function t(e){c()(this,t),this.page=e,this.setGameTime=30,this.gameTime=0,this.gameStatus="ready",this.asset=new u,this.stage=null,this.width=2*innerWidth,this.height=2*innerHeight<1334?2*innerHeight:1334,this.scale=.5,this.ticker=null,this.Zongzi=null,this.enemySpeed=700,this.createSpeed=400,this.hand=null,this.beginBtn=null,this.score=0}return l()(t,[{key:"init",value:function(){this.asset.on("complete",function(){this.asset.off("complete"),this.initStage()}.bind(this)),this.asset.load()}},{key:"initStage",value:function(){this.stage=new Hilo.Stage({renderType:"canvas",width:this.width,height:this.height,scaleX:this.scale,scaleY:this.scale,container:this.page}),this.stage.enableDOMEvent([Hilo.event.POINTER_START,Hilo.event.POINTER_MOVE,Hilo.event.POINTER_END]),this.ticker=new Hilo.Ticker(60),this.ticker.addTick(this.stage),this.ticker.addTick(Hilo.Tween),this.ticker.start(!0),this.initBg(),this.initBeginBtn()}},{key:"initBg",value:function(){var t=this.asset.bg;new Hilo.Bitmap({id:"bg",image:t,scaleX:this.width/t.width,scaleY:this.height/t.height}).addTo(this.stage)}},{key:"initBeginBtn",value:function(){this.beginBtn=new Hilo.Bitmap({id:"beginBtn",image:this.asset.beginBtn,x:(this.width-this.asset.beginBtn.width)/2,y:this.height-this.asset.beginBtn.height-200,rect:[0,0,this.asset.beginBtn.width,this.asset.beginBtn.height]}).addTo(this.stage,1),this.beginBtn.on(Hilo.event.POINTER_START,this.startGame.bind(this))}},{key:"startGame",value:function(){this.initZongzi(),this.initHand(),this.stage.removeChild(this.beginBtn),this.gameTime=this.setGameTime,this.score=0,this.gameStatus="play",this.calcTime()}},{key:"calcTime",value:function(){var t=this;setTimeout(function(){t.gameTime>0?(t.gameTime--,t.calcTime()):t.gameOver()},1e3)}},{key:"gameOver",value:function(){this.Zongzi.stopCreateEnemy(),this.gameStatus="ready",this.initBeginBtn(),this.stage.removeChild(this.hand)}},{key:"initZongzi",value:function(){this.Zongzi=new p({id:"Zongzi",height:this.height,width:this.width,enemySpeed:this.enemySpeed,createSpeed:this.createSpeed,pointerEnabled:!1,zongziList:[this.asset.bigzZongzi,this.asset.zongzi,this.asset.fruit]}).addTo(this.stage,2),this.stage.onUpdate=this.onUpdate.bind(this)}},{key:"initHand",value:function(){this.hand=new w({id:"hand",img:this.asset.hand,height:this.asset.hand.height,width:this.asset.hand.width,x:this.width/2-this.asset.hand.width/2,y:this.height-this.asset.hand.height+30}).addTo(this.stage,1),Hilo.util.copy(this.hand,Hilo.drag),this.hand.startDrag([-this.asset.hand.width/4,this.height-this.asset.hand.height+30,this.width-this.asset.hand.width/2,0])}},{key:"onUpdate",value:function(){var t=this;"ready"!=this.gameStatus&&this.Zongzi.children.forEach(function(e){if(t.hand.checkCollision(e))switch(e.over(),t.score+=e.score,e.score){case-10:t.hand.addScore(t.asset.score0);break;case 5:t.hand.addScore(t.asset.score1);break;case 10:t.hand.addScore(t.asset.score2)}})}}]),t}(),v={name:"",data:function(){return{game:new b,scorePopup:!1}},watch:{gameTime:function(t){var e=this;0==t&&setTimeout(function(){e.scorePopup=!0},1500)}},computed:{score:function(){return this.game.score},gameTime:function(){return this.game.gameTime}},methods:{},mounted:function(){this.game.page=this.$refs.hilo,this.game.init()}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"hilo",staticClass:"hilo"},[i("van-popup",{staticStyle:{background:"none",overflow:"initial"},model:{value:t.scorePopup,callback:function(e){t.scorePopup=e},expression:"scorePopup"}},[i("div",{staticClass:"scorePopup"},[i("div",{staticStyle:{height:"40px"}}),t._v(" "),i("div",{staticClass:"time",staticStyle:{"text-align":"center"}},[t._v(t._s(t.gameTime)+"s")]),t._v(" "),i("div",{staticClass:"scorePopup-score",staticStyle:{"text-align":"center"}},[t._v("\n                "+t._s(t.score)+"分\n            ")])])])],1)},staticRenderFns:[]};var z=i("VU/8")(v,y,!1,function(t){i("8le3")},"data-v-5039c27a",null).exports;n.a.use(o.a);var T=new o.a({routes:[{path:"/",name:"HelloWorld",component:z}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:T,components:{App:h},template:"<App/>"})},Y5Kh:function(t,e,i){t.exports=i.p+"static/img/bigzZongzi.ee8437a.png"},eWW6:function(t,e,i){t.exports=i.p+"static/img/beginBtn.bce9d14.png"},g1Dp:function(t,e,i){t.exports=i.p+"static/img/fruit.bb114d6.png"},kmFj:function(t,e,i){t.exports=i.p+"static/img/score1.84cf513.png"}},["NHnr"]);
//# sourceMappingURL=app.3e5f59bbee9967f10d70.js.map